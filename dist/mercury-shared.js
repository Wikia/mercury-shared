"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){e.simpleExtend=function(e,n){var t={},i=void 0;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}}(window.M),function(e){function n(){var n=e.getFromShoebox("applicationData.wikiVariables"),t=("; "+document.cookie).split("; wikia_beacon_id="),i="";return 2===t.length&&(i=t.pop().split(";").shift()),{c:n.id,x:n.dbName,lc:n.language.content,u:parseInt(e.getFromShoebox("userId"),10)||0,s:"mercury",beacon:i,cb:Math.floor(99999*Math.random())}}function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})}function i(e,n){var t=[];return Object.keys(n).forEach(function(e){var i=n[e];if(null!==i){var o=encodeURIComponent(e)+"="+encodeURIComponent(i);t.push(o)}}),""+a+e+"?"+t.join("&")}function o(t,o){var r=e.simpleExtend(o,n());e.loadScript(i(t,r))}function r(n){var i=e.cookie.getCookieValue("tracking_session_id"),r=e.cookie.getCookieValue("pv_number"),a=e.cookie.getCookieValue("pv_number_global"),c=e.getFromShoebox("runtimeConfig.cookieDomain"),l=new Date;window.pvUID=t(),window.sessionId=i||t(),window.pvNumber=r?parseInt(r,10)+1:1,window.pvNumberGlobal=a?parseInt(a,10)+1:1,l=new Date(l.getTime()+18e5),document.cookie="tracking_session_id="+window.sessionId+"; expires="+l.toGMTString()+";domain="+c+"; path=/;",document.cookie="pv_number="+window.pvNumber+"; expires="+l.toGMTString()+"; path=/;",document.cookie="pv_number_global="+window.pvNumberGlobal+"; expires="+l.toGMTString()+";domain="+c+"; path=/;",o("view",e.simpleExtend({ga_category:"view",session_id:window.sessionId,pv_unique_id:window.pvUID,pv_number:window.pvNumber,pv_number_global:window.pvNumberGlobal},n)),console.info("Track pageView: Internal")}var a="https://beacon.wikia-services.com/__track/";e.tracker.Internal={track:o,trackPageView:r,_createRequestURL:i},e.getFromShoebox("runtimeConfig.noExternals")||e.getFromShoebox("serverError")||e.tracker.Internal.trackPageView({a:e.getFromShoebox("wikiPage.data.details.id"),n:e.getFromShoebox("wikiPage.data.ns")})}(window.M),function(e){function n(e,n,t){-1===h.indexOf(e)&&(ga("create",e,"auto",t),ga(n+"require","linker"),h.push(e))}function t(e){return e.prefix?e.prefix+".":""}function i(t){var i=e.getFromShoebox("runtimeConfig.gaUserIdHash")||"",o={name:"",allowLinker:!0,sampleRate:E[t].sampleRate,userId:i.length>0?i:null},r="",a=void 0;t!==O&&(a=E[t].prefix,r=a+".",o.name=a),n(E[t].id,r,o),ga(r+"linker:autoLink",["wikia.com"]),y.push(E[t])}function o(e){var n=k[e];return"function"==typeof n?n():n}function r(){_||(y.forEach(function(e){var n=t(e);Object.keys(k).forEach(function(e){ga(n+"set","dimension"+e,o(e))})}),_=!0)}function a(n,t){if(Object.keys(n).length)if(!0===t)_=!1,k=n;else{var i=e.simpleExtend({},n);k=e.simpleExtend(k,n),_=_&&Object.keys(i).length===Object.keys(k).length,_&&Object.keys(k).forEach(function(e){_=_&&i[e]===k[e]})}}function c(e,n){void 0!==n&&(k[e]=String(n),_=!1)}function l(e,n,i,o,a){S?(r(),y.forEach(function(r){if(r.prefix!==A){var c=t(r);ga(c+"send",{hitType:"event",eventCategory:e,eventAction:n,eventLabel:i,eventValue:o,nonInteraction:a})}})):w.push({category:e,action:n,label:i,value:o,nonInteractive:a})}function s(e,n,t,i,o){r(),ga(E[A].prefix+".send",{hitType:"event",eventCategory:e,eventAction:n,eventLabel:t,eventValue:i,nonInteraction:o})}function u(e){var n=["query"],t=e.replace(/^\?/,"").split("&").filter(function(e){return 0===n.indexOf(e.split("=")[0])}).reduce(function(e,n){return n},"");return t?"?"+t:""}function p(e){var n=document.createElement("a");n.href=e||window.location.href,y.forEach(function(e){var i=t(e);ga(i+"set","page",n.pathname+u(n.search))})}function f(e,n){I.forEach(function(e){c(e,"")}),"object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).forEach(function(n){c(n,e[n])}),r(),p(n),y.forEach(function(e){var n=t(e);ga(n+"send","pageview")}),console.info("Track PageView: Universal Analytics")}function m(){var e=function(){var e=window.optimizely;return e&&e.activeExperiments&&Array.isArray(e.activeExperiments)&&e.activeExperiments.length>0&&"object"===_typeof(e.allExperiments)&&Object.keys(e.allExperiments).length>0&&"object"===_typeof(e.variationNamesMap)&&Object.keys(e.variationNamesMap).length>0}()?window.optimizely.activeExperiments:null;e&&e.forEach(function(e){if(optimizely.allExperiments.hasOwnProperty(e)&&"object"===_typeof(optimizely.allExperiments[e].universal_analytics)){var n=optimizely.allExperiments[e].universal_analytics.slot,t=optimizely.allExperiments[e].name,i=optimizely.variationNamesMap[e];k[n]="Optimizely "+t+" ("+e+"): "+i,_=!1}})}function g(){var e=window.Wikia&&window.Wikia.AbTest;if(e)for(var n=e.getExperiments(!0),t=0;t<n.length;t++){var i=n[t],o=e.getGASlot(i.name);if(i&&i.flags&&i.flags.ga_tracking&&o>=40&&o<=49){var r=n.nouuid?"NOBEACON":"NOT_IN_ANY_GROUP";k[o]=i.group?i.group.name:r,_=!1}}}function v(){w.forEach(function(e){l(e.category,e.action,e.label,e.value,e.nonInteractive)}),w=[]}function d(n){return void 0===n?(console.log("Cannot initialize UA; please provide dimensions"),!1):y.length?(console.log("Cannot initialize UA mutltiple times."),!1):(a(n),m(),g(),E=e.getFromShoebox("tracking.ua"),i(O),i(A),e.getFromShoebox("applicationData.wikiVariables.isGASpecialWiki")&&i(j),S=!0,v(),!0)}function x(){y=[],h=[],_=!1}function b(){return _}var y=[],w=[],h=[],k={},_=!1,E=void 0,S=!1,I=[3,14,19,25],O="primary",j="special",A="ads";e.tracker.UniversalAnalytics={initialize:d,destroy:x,setDimension:c,track:l,trackAds:s,trackPageView:f,_setDimensions:a,_getDimensionsSynced:b,_updateTrackedUrl:p,_filterQueryParams:u,_dimensions:k}}(M),function(e){if(!e.getFromShoebox("runtimeConfig.noExternals")&&!e.getFromShoebox("serverError")){var n=e.getFromShoebox("trackingDimensionsForFirstPage");if(n){var t=e.tracker.UniversalAnalytics;t.initialize(n)&&t.trackPageView({3:n[3],14:n[14],19:n[19],25:n[25]})}}}(window.M),function(e){e.cookie={getValue:function(e){var n=("; "+document.cookie).split("; "+e+"=");return 2===n.length?n.pop().split(";").shift():null}}}(window.M);